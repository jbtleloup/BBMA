<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>lama</title>


    <link rel="stylesheet" href="lama.css">

</head>
<body>

<section class='filler'>
    <p>
        Scroll
    </p>
</section>

<section id='scrolly-side'>

    <div class='scrolly'>

        <!--  step text   -->
        <article>
            <div class='step' data-width='10%' data-index='0'>
                <p>Etape 1</p>
            </div>
            <div class='step' data-width='90%' data-index='1'>
                <p>Etape 2</p>
            </div>
            <div class='step' data-width='50%' data-index='2'>
                <p>Etape 3</p>
            </div>
            <div class='step' data-width='50%' data-index='3'>
                <p>Etape 4</p>
            </div>
        </article>

        <!--  sticky graphic   -->
        <figure class='sticky'>
                <p id="inner-text">yeah</p>
        </figure>

    </div>

</section>

<section class='filler'>
    <p>
        End
    </p>
</section>

<script src='https://unpkg.com/d3@5.9.1/dist/d3.min.js'></script>
<script src="https://unpkg.com/enter-view"></script>

<script>
    const container = d3.select('#scrolly-side');
    const stepSel = container.selectAll('.step');
    const text1 = "Setting up a website appropriate for your need and taking control of your social media accounts";
    const text2 = "Creating high quality content to post on social media, developing marketing strategy to improve sales";
    const text3 = "Sale increase as well as income increase you're on your way to success";
    const text4 = "You're rich Yeah Monney!!";
    const textes = [text1, text2, text3, text4]


    function updateChart(index) {

        //console.log(textes[index]);

        //const sel = container.select(`[data-index='${index}']`);
        // const width = sel.attr('data-width');
        stepSel.classed('is-active', (d, i) => i === index);
        let el = document.getElementById('inner-text');
        el.innerHTML = textes[index];
        // container.select('.bar-inner').style('width', width);
    }

    function init() {
        //Stickyfill.add(d3.select('.sticky').node());

        enterView({
            selector: stepSel.nodes(),
            offset: 0.5,
            enter: el => {
                const index = +d3.select(el).attr('data-index');
                updateChart(index);
            },
            exit: el => {
                let index = +d3.select(el).attr('data-index');
                index = Math.max(0, index - 1);
                updateChart(index);
            } });

    }

    init();
</script>


</body>
</html>